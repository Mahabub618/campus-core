CREATE TABLE fee_structures (
    id UUID PRIMARY KEY,
    name VARCHAR(100),
    class_id UUID REFERENCES classes(id),
    academic_year VARCHAR(20),
    total_amount DECIMAL(10,2),
    due_date DATE,
    is_active BOOLEAN DEFAULT true
);

CREATE TABLE fee_payments (
    id UUID PRIMARY KEY,
    student_id UUID REFERENCES students(id),
    fee_structure_id UUID REFERENCES fee_structures(id),
    amount_paid DECIMAL(10,2),
    payment_date DATE,
    payment_mode VARCHAR(50), -- 'CASH', 'CHEQUE', 'ONLINE', 'CARD'
    transaction_id VARCHAR(100),
    collected_by UUID REFERENCES users(id),
    receipt_number VARCHAR(50) UNIQUE
);

CREATE TABLE expenses (
    id UUID PRIMARY KEY,
    category VARCHAR(100), -- 'SALARY', 'MAINTENANCE', 'UTILITIES', 'STATIONERY'
    amount DECIMAL(10,2),
    description TEXT,
    expense_date DATE,
    approved_by UUID REFERENCES users(id),
    payment_mode VARCHAR(50),
    receipt_url VARCHAR(500)
);

CREATE TABLE salaries (
    id UUID PRIMARY KEY,
    employee_id UUID REFERENCES users(id),
    month YEAR_MONTH,
    basic_salary DECIMAL(10,2),
    allowances DECIMAL(10,2),
    deductions DECIMAL(10,2),
    net_salary DECIMAL(10,2),
    payment_status VARCHAR(20), -- 'PENDING', 'PAID', 'PARTIAL'
    paid_date DATE,
    transaction_id VARCHAR(100)
);